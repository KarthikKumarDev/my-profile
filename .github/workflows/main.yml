name: Deploy Surge Website   
on: [push]

jobs:
       build:                           
           runs-on: ubuntu-latest 
           name: Deploying to surge 
           steps:    
           - uses: actions/checkout@v2 
           - name: Install Node.js
             uses: actions/setup-node@v2-beta
             with: 
               node-version: 14.15 
               
           - name: install dependencies                              
             run: npm install
           - name: Build App
             env:
                BUILD_NUM: ${{ github.run_number }}
                ACTIONS_ALLOW_UNSECURE_COMMANDS: 'true'
                run: echo ::set-env name=REACT_APP_VERSION::$(($BUILD_NUM+50))
             run: npm run build
             
           - name: Install Surge
             run: npm install --global surge
             
           - name: Run surge
             run: surge ./build kkumar-folio.surge.sh --token ${{ secrets.SURGE_TOKEN }}
