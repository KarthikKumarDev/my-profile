name: Deploy Surge Website   
on: [push]   
jobs:
       build:                           
           runs-on: ubuntu-latest 
           name: Deploying to surge 
           steps:    
           - uses: actions/checkout@v2 
           - name: Install Node.js
             uses: actions/setup-node@v2-beta
             with: 
               node-version: 14.15 
               
           - name: install dependencies                              
             run: npm install
           - name: Build App                              
             run: npm run build
             
           - name: Install Surge
             run: npm install --global surge
           - name: Generate build number
             env:
              BUILD_NUM: ${{ github.run_number }}
             run: echo ::set-env name=GITHUB_RUN_NUMBER_WITH_OFFSET::$(($BUILD_NUM+53))
           - name: Add the Build number
             run: export REACT_APP_VERSION=$GITHUB_RUN_NUMBER_WITH_OFFSET 
           - name: Run surge
             run: surge ./build kkumar-folio.surge.sh --token ${{ secrets.SURGE_TOKEN }}
